context:
  name: opencolorio
  version: "2.5.1"
package:
  version: "2.5.1"
  name: ${{ name }}
source:
  url: https://github.com/AcademySoftwareFoundation/OpenColorIO/archive/refs/tags/v${{ version }}.tar.gz
build:
  number: 4
  script: pwsh -Command "& ${{'$env:RECIPE_DIR' if win else '$RECIPE_DIR'}}/build-${{ name }}.ps1"
requirements:
  build:
    - c-compiler
    - cxx-compiler
    - cmake 3.*
    - ninja
  host:
    - expat
    - yaml-cpp
    - imath
    - zlib
    - if: not osx
      then:
        - minizip
  run_exports:
    - ${{ pin_subpackage('opencolorio', upper_bound='x.x') }}
tests:
  - package_contents:
      lib:
        - if: win
          then:
            - OpenColorIO*
        - if: unix
          then:
            - libOpenColorIO
